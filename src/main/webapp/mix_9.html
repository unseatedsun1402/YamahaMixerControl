<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/JSP_Servlet/Html.html to edit this template
-->
<html>
    <head>
        <title>Select Midi Device</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css"/>
        <script>
            var Client = {};

            Client.socket = null;

            Client.connect = (function(host) {
                if ('WebSocket' in window) {
                    Client.socket = new WebSocket(host);
                } else if ('MozWebSocket' in window) {
                    Client.socket = new MozWebSocket(host);
                    } else {
                    console.log('Error: WebSocket is not supported by this browser.');
                    return;
            }

            Client.socket.onopen = function () 
            {
                console.log('Info: WebSocket connection opened.');
                elements = document.getElementsByClassName("chfader");
                for(let element of elements)
                {
                element.addEventListener("input",function() 
                    {
                        let message = JSON.stringify({id:this.id,param:0,value:this.value});
                        Client.sendMessage(message);
                    });
                }
            };

            Client.socket.onclose = function () {
                //document.getElementById('Client').onkeydown = null;
                console.log('Info: WebSocket closed.');
            };

            Client.socket.onmessage = function (message) {
                console.log(message.data);
            };
        });

        Client.initialize = function() {
            if (window.location.protocol == 'http:') {
                Client.connect('ws://' + window.location.host + '/MidiControl/endpoint');
            } else {
                Client.connect('wss://' + window.location.host + '/MidiControl/endpoint');
            }
        };

        Client.sendMessage = (function(msg) {
            //var message = document.getElementById('Client').value;
            var message = msg;
            if (message != '') {
                Client.socket.send(message);
                //document.getElementById('Client').value = '';
            }
        });
        
        Client.initialize();
        </script>
        
        <script>
        async function demo(){
            const URL='http://'+window.location.host+'/MidiControl/devices';
            const Res= fetch(URL);
            const response= await Res;
            const json= await response.text();
            if(!(json==null)){
                document.getElementById("midiDevice").innerHTML = json;
            }
        }
        function doSet(){
            var selector = document.getElementById("midi-select");
            console.log(selector.value);
            if(!(selector==null)){
                fetch("setmididevice?set="+selector.value);
                alert("device selected: "+selector.value);
            }
            //console.log(selector.value);
            }
        //demo();
        
        </script>
    </head>
    <body>
        <div id="ch-levels" style="float:none;">
            <div class="bank">
                <input type="range" class="chfader" id="ch126" min="0" max="127"><label class="chfader-label" for="ch1">ch1 </label>
                <input type="range" class="chfader" id="ch127" min="0" max="127"><label class="chfader-label" for="ch2">ch2 </label>
                <input type="range" class="chfader" id="ch128" min="0" max="127"><label class="chfader-label" for="ch3">ch3 </label>
                <input type="range" class="chfader" id="ch129" min="0" max="127"><label class="chfader-label" for="ch4">ch4 </label>
            </div>

            <!-- row 1 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch130" min="0" max="127"><label class="chfader-label" for="ch5">ch5 </label>
                <input type="range" class="chfader" id="ch131" min="0" max="127"><label class="chfader-label" for="ch6">ch6 </label>
                <input type="range" class="chfader" id="ch132" min="0" max="127"><label class="chfader-label" for="ch7">ch7 </label>
                <input type="range" class="chfader" id="ch133" min="0" max="127"><label class="chfader-label" for="ch8">ch8 </label>
            </div>

            <!--row 2 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch134" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch9">ch9 </label>
                <input type="range" class="chfader" id="ch135" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch10">ch10</label>
                <input type="range" class="chfader" id="ch136" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch11">ch11</label>
                <input type="range" class="chfader" id="ch137" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch12">ch12</label>
            </div>

            <!-- row 3 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch138" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch13">ch13</label>
                <input type="range" class="chfader" id="ch139" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch14">ch14</label>
                <input type="range" class="chfader" id="ch140" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch15">ch15</label>
                <input type="range" class="chfader" id="ch141" min="0" max="127" style="accent-color: #00FFFF;"><label class="chfader-label" for="ch16">ch16</label>
            </div>
            
            <!-- row 4 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch142" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch17">ch17</label>
                <input type="range" class="chfader" id="ch143" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch18">ch18</label>
                <input type="range" class="chfader" id="ch144" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch19">ch19</label>
                <input type="range" class="chfader" id="ch145" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch20">ch20</label>
            </div>
            
            <!-- row 5 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch146" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch21">ch21</label>
                <input type="range" class="chfader" id="ch147" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch22">ch22</label>
                <input type="range" class="chfader" id="ch148" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch23">ch23</label>
                <input type="range" class="chfader" id="ch149" min="0" max="127" style="accent-color: #FF2222;"><label class="chfader-label" for="ch24">ch24</label>
            </div>
            
            <!-- row 6 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch150" min="0" max="127"><label class="chfader-label" for="ch25">ch25</label>
                <input type="range" class="chfader" id="ch151" min="0" max="127"><label class="chfader-label" for="ch26">ch26</label>
                <input type="range" class="chfader" id="ch152" min="0" max="127"><label class="chfader-label" for="ch27">ch27</label>
                <input type="range" class="chfader" id="ch153" min="0" max="127"><label class="chfader-label" for="ch28">ch28</label>
            </div>
            
            <!-- row 7 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch154" min="0" max="127"><label class="chfader-label" for="ch29">ch29</label>
                <input type="range" class="chfader" id="ch155" min="0" max="127"><label class="chfader-label" for="ch30">ch30</label>
                <input type="range" class="chfader" id="ch156" min="0" max="127"><label class="chfader-label" for="ch31">ch31</label>
                <input type="range" class="chfader" id="ch157" min="0" max="127"><label class="chfader-label" for="ch32">ch32</label>
            </div>
            
            <!-- row 8 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch158" min="0" max="127"><label class="chfader-label" for="ch33">ch33</label>
                <input type="range" class="chfader" id="ch159" min="0" max="127"><label class="chfader-label" for="ch34">ch34</label>
                <input type="range" class="chfader" id="ch160" min="0" max="127"><label class="chfader-label" for="ch35">ch35</label>
                <input type="range" class="chfader" id="ch161" min="0" max="127"><label class="chfader-label" for="ch36">ch36</label>
            </div>
            
            <!-- row 9 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch161" min="0" max="127"><label class="chfader-label" for="ch37">ch37</label>
                <input type="range" class="chfader" id="ch162" min="0" max="127"><label class="chfader-label" for="ch38">ch38</label>
                <input type="range" class="chfader" id="ch163" min="0" max="127"><label class="chfader-label" for="ch39">ch39</label>
                <input type="range" class="chfader" id="ch164" min="0" max="127"><label class="chfader-label" for="ch40">ch40</label>
            </div>
            
            <!-- row 10 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch164" min="0" max="127"><label class="chfader-label" for="ch41">ch41</label>
                <input type="range" class="chfader" id="ch165" min="0" max="127"><label class="chfader-label" for="ch42">ch42</label>
                <input type="range" class="chfader" id="ch166" min="0" max="127"><label class="chfader-label" for="ch43">ch43</label>
                <input type="range" class="chfader" id="ch167" min="0" max="127"><label class="chfader-label" for="ch44">ch44</label>
            </div>
            
            <!-- row 12 -->
            <div class="bank">
                <input type="range" class="chfader" id="ch168" min="0" max="127"><label class="chfader-label" for="ch45">ch45</label>
                <input type="range" class="chfader" id="ch169" min="0" max="127"><label class="chfader-label" for="ch46">ch46</label>
                <input type="range" class="chfader" id="ch170" min="0" max="127"><label class="chfader-label" for="ch47">ch47</label>
                <input type="range" class="chfader" id="ch171" min="0" max="127"><label class="chfader-label" for="ch48">ch48</label>
            </div>
        </div>
        
        
    </body>
</html>
